import{S as t,i as e,s as a,e as s,t as n,c as o,a as r,g as i,d as u,f as l,F as c,h as f,k as d,n as h,b as p,H as m,I as v,J as g,K as y,l as U,G as b,L as E,M as x,z as N}from"../chunks/vendor-b7e99b21.js";function S(t,e,a){const s=t.slice();return s[9]=e[a].from,s[10]=e[a].text,s[11]=e[a].to,s}function M(t){let e,a,d,h,p=t[9]+"",m=t[10]+"";return{c(){e=s("p"),a=n(p),d=n(": "),h=n(m)},l(t){e=o(t,"P",{});var s=r(e);a=i(s,p),d=i(s,": "),h=i(s,m),s.forEach(u)},m(t,s){l(t,e,s),c(e,a),c(e,d),c(e,h)},p(t,e){8&e&&p!==(p=t[9]+"")&&f(a,p),8&e&&m!==(m=t[10]+"")&&f(h,m)},d(t){t&&u(e)}}}function O(t){let e,a,f,U,b,E,x,N,S;return{c(){e=s("form"),a=s("label"),f=n("Message\n\t\t\t"),U=s("input"),b=d(),E=s("button"),x=n("Send Message"),this.h()},l(t){e=o(t,"FORM",{});var s=r(e);a=o(s,"LABEL",{});var n=r(a);f=i(n,"Message\n\t\t\t"),U=o(n,"INPUT",{type:!0}),n.forEach(u),b=h(s),E=o(s,"BUTTON",{type:!0});var l=r(E);x=i(l,"Send Message"),l.forEach(u),s.forEach(u),this.h()},h(){p(U,"type","text"),p(E,"type","submit")},m(s,n){l(s,e,n),c(e,a),c(a,f),c(a,U),m(U,t[1].text),c(e,b),c(e,E),c(E,x),N||(S=[v(U,"input",t[7]),v(e,"submit",g(t[4]))],N=!0)},p(t,e){2&e&&U.value!==t[1].text&&m(U,t[1].text)},d(t){t&&u(e),N=!1,y(S)}}}function k(t){let e,a,x,N,k,T,B,I,L,P,J,A,F,K,R,W,w,D,H,V,j,z,G,q,C,Q,X,Y=t[0].uuid+"",Z=t[3],$=[];for(let s=0;s<Z.length;s+=1)$[s]=M(S(t,Z,s));let _=t[0].name&&O(t);return{c(){e=s("h1"),a=n("Welcome to SvelteKit"),x=d(),N=s("p"),k=n("Visit "),T=s("a"),B=n("kit.svelte.dev"),I=n(" to read the documentation"),L=d();for(let t=0;t<$.length;t+=1)$[t].c();P=d(),J=s("p"),A=n("UUID: "),F=n(Y),K=d(),R=s("form"),W=s("label"),w=n("Username\n\t\t"),D=s("input"),H=d(),V=s("button"),j=n("Update Username"),z=d(),G=s("br"),q=d(),_&&_.c(),C=U(),this.h()},l(t){e=o(t,"H1",{});var s=r(e);a=i(s,"Welcome to SvelteKit"),s.forEach(u),x=h(t),N=o(t,"P",{});var n=r(N);k=i(n,"Visit "),T=o(n,"A",{href:!0});var l=r(T);B=i(l,"kit.svelte.dev"),l.forEach(u),I=i(n," to read the documentation"),n.forEach(u),L=h(t);for(let e=0;e<$.length;e+=1)$[e].l(t);P=h(t),J=o(t,"P",{});var c=r(J);A=i(c,"UUID: "),F=i(c,Y),c.forEach(u),K=h(t),R=o(t,"FORM",{});var f=r(R);W=o(f,"LABEL",{});var d=r(W);w=i(d,"Username\n\t\t"),D=o(d,"INPUT",{type:!0}),d.forEach(u),H=h(f),V=o(f,"BUTTON",{type:!0});var p=r(V);j=i(p,"Update Username"),p.forEach(u),f.forEach(u),z=h(t),G=o(t,"BR",{}),q=h(t),_&&_.l(t),C=U(),this.h()},h(){p(T,"href","https://kit.svelte.dev"),p(D,"type","text"),p(V,"type","submit")},m(s,n){l(s,e,n),c(e,a),l(s,x,n),l(s,N,n),c(N,k),c(N,T),c(T,B),c(N,I),l(s,L,n);for(let t=0;t<$.length;t+=1)$[t].m(s,n);l(s,P,n),l(s,J,n),c(J,A),c(J,F),l(s,K,n),l(s,R,n),c(R,W),c(W,w),c(W,D),m(D,t[2]),c(R,H),c(R,V),c(V,j),l(s,z,n),l(s,G,n),l(s,q,n),_&&_.m(s,n),l(s,C,n),Q||(X=[v(D,"input",t[6]),v(R,"submit",g(t[5]))],Q=!0)},p(t,[e]){if(8&e){let a;for(Z=t[3],a=0;a<Z.length;a+=1){const s=S(t,Z,a);$[a]?$[a].p(s,e):($[a]=M(s),$[a].c(),$[a].m(P.parentNode,P))}for(;a<$.length;a+=1)$[a].d(1);$.length=Z.length}1&e&&Y!==(Y=t[0].uuid+"")&&f(F,Y),4&e&&D.value!==t[2]&&m(D,t[2]),t[0].name?_?_.p(t,e):(_=O(t),_.c(),_.m(C.parentNode,C)):_&&(_.d(1),_=null)},i:b,o:b,d(t){t&&u(e),t&&u(x),t&&u(N),t&&u(L),E($,t),t&&u(P),t&&u(J),t&&u(K),t&&u(R),t&&u(z),t&&u(G),t&&u(q),_&&_.d(t),t&&u(C),Q=!1,y(X)}}}function T(t,e,a){const s={uuid:x(),name:""},n={from:s.uuid,text:"default",to:"all"};let o,r,i=[];return N((()=>{r=new WebSocket("ws://localhost:8080"),r.onmessage=function(t){const e=JSON.parse(t.data);if("message"===e.type){const t=e.data;a(3,i=[...i,t])}else if("update"===e.type){const t=e.data;console.log(t),console.log(s),s.uuid===t.uuid&&a(0,s.name=t.name,s)}}})),[s,n,o,i,function(){const t={type:"message",data:n};r.send(JSON.stringify(t)),a(1,n.text="",n)},function(){const t={type:"update",data:{uuid:s.uuid,name:o}};r.send(JSON.stringify(t))},function(){o=this.value,a(2,o)},function(){n.text=this.value,a(1,n)}]}export default class extends t{constructor(t){super(),e(this,t,T,k,a,{})}}
